<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<head>
<script src="libraries/d3.v3.min.js"></script>
<script src="libraries/topojson.v1.min.js"></script>
<script src="libraries/queue.v1.min.js"></script>
<style>

</style>
</head>
<body>

<div id="main">
	<div id="mapContainer"></div>
	<div id="lineChartContainer"></div>
</div>

</body>
<script>


var drawMap = function(states_map) {

	/* ALL MAP-RELATED CODE AND FUNCTIONS WILL GO IN HERE*/

	/* DEFINE CONSTANTS */
	var mapContainerSize = {'height':800,'width':800};
	var mapSize = {'height':800,'width':800};

	/* CREATE THE MAP SVG CONTAINERS */
	var mapContainer = d3.select("#mapContainer").append("svg")
		.attr("width", mapContainerSize.width)
        .attr("height", mapContainerSize.height);

	var map = mapContainer.append("g")
        .attr("width", mapSize.width)
        .attr("height", mapSize.height);

	var projection = d3.geo.mercator()
		.center([0, 0])
		.scale(500)
		.translate([mapSize.width / 2, mapSize.height / 2]);

	var path = d3.geo.path().projection(projection);

	states = map.selectAll('.states')
  	.data(topojson.feature(states_map, states_map.objects.NGA_adm1).features)
  	.enter().append("path")
  	.attr('d', path)
  	.style("fill", function(d, i) { 
        	return 'rgb(200,200,200)';
    })
  	.attr('class','states');
};

var drawLineChart = function(data) {

	/* ALL LINE CHART-RELATED CODE AND FUNCTIONS WILL GO IN HERE*/

};

/* THESE FUNCTIONS GET CALLED BY THE QUEUE AND RETURN THE CORRECTLY STRUCTURED DATA ON LOAD. THEY WILL EVENTUALLY BE REPLACED BY SERVER-SIDE DATA API'S */
function processData1(d) {}
function processData2(d) {}

/* THE QUEUE SPECIFIES WHICH DATASETS TO LOAD. IT WILL EVENTUALLY BE REPLACED BY CALLS TO A DATA API (EXCEPT IN THE CASE OF STATIC MAP FILES) */
queue()
	.defer(d3.json, "maps/nga-states-topo-05.json")
	.await(ready);

/* WHEN ALL THE DATASETS IN THE QUEUE ARE LOADED UP THE ready FUNCTION IS TRIGGERED */
function ready(error, states_map) {
	/* PASS THE PROCESSED DATA TO THE CHARTING FUNCTIONS */
	drawMap(states_map);

}

</script>
</html>